"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[9],{2009:(Y,h,o)=>{o.r(h),o.d(h,{UserManagementModule:()=>B});var u=o(6814),_=o(2129),T=o(5861),e=o(9467),c=o(553),C=o(9862);let b=(()=>{class s{constructor(t){this.http=t}mahasiswa_get(t){return new Promise((n,a)=>this.http.get(c.N.url+`mahasiswa-get?X-API-KEY=${t}`).subscribe({next:l=>n(l),error:l=>a(l)}))}prodi_get(t){return new Promise((n,a)=>this.http.get(c.N.url+`prodi-get?X-API-KEY=${t}`).subscribe({next:l=>n(l),error:l=>a(l)}))}fakultas_get(t){return new Promise((n,a)=>this.http.get(c.N.url+`fakultas-get?X-API-KEY=${t}`).subscribe({next:l=>n(l),error:l=>a(l)}))}mahasiswa_post(t){return new Promise((n,a)=>this.http.post(c.N.url+"insert-mahasiswa",t).subscribe({next:i=>n(i),error:i=>a(i)}))}delete_mahasiswa_post(t){return new Promise((n,a)=>this.http.post(c.N.url+"delete-mahasiswa",t).subscribe({next:i=>n(i),error:i=>a(i)}))}editMahasiswa_post(t){return new Promise((n,a)=>this.http.post(c.N.url+"edit-mahasiswa",t).subscribe({next:i=>n(i),error:i=>a(i)}))}delete_selected_mahasiswa_post(t){return new Promise((n,a)=>this.http.post(c.N.url+"delete-selected-mahasiswa",t).subscribe({next:i=>n(i),error:i=>a(i)}))}static#e=this.\u0275fac=function(n){return new(n||s)(e.LFG(C.eN))};static#t=this.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var g=o(5219),d=o(95),m=o(707),M=o(3714),Z=o(3904),A=o(3530),x=o(3965),f=o(6651),w=o(4480),p=o(9552),S=o(4104),I=o(6340);function U(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"p-button",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.tambahMahasiswa())}),e.qZA(),e.TgZ(1,"p-button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.confirmDeleteBorongan())}),e.qZA()}if(2&s){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.selectedMahasiswa||!t.selectedMahasiswa.length)}}const D=()=>({height:"6px"});function N(s,r){1&s&&(e.TgZ(0,"div",0),e._UZ(1,"p-progressBar",16),e.qZA()),2&s&&(e.xp6(1),e.Akn(e.DdM(2,D)))}function y(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",17)(1,"h5",18),e._uU(2,"Manage Mahasiswa"),e.qZA(),e.TgZ(3,"span",19),e._UZ(4,"i",20),e.TgZ(5,"input",21),e.NdJ("input",function(a){e.CHM(t),e.oxw();const i=e.MAs(8);return e.KtG(i.filterGlobal(a.target.value,"contains"))}),e.qZA()()()}}function E(s,r){1&s&&(e.TgZ(0,"tr")(1,"th",22),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th",23),e._uU(4," NIM "),e._UZ(5,"p-sortIcon",24),e.qZA(),e.TgZ(6,"th",25),e._uU(7," Nama Mahasiswa "),e._UZ(8,"p-sortIcon",26),e.qZA(),e.TgZ(9,"th",27),e._uU(10," Prodi "),e._UZ(11,"p-sortIcon",28),e.qZA(),e.TgZ(12,"th",29),e._uU(13," Fakultas "),e._UZ(14,"p-sortIcon",30),e.qZA(),e._UZ(15,"th"),e.qZA())}function P(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"p-tableCheckbox",31),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td")(12,"button",32),e.NdJ("click",function(){const i=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.editMahasiswa(i))}),e.qZA(),e.TgZ(13,"button",33),e.NdJ("click",function(){const i=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.confirmDelete(i))}),e.qZA()()()}if(2&s){const t=r.$implicit;e.xp6(2),e.Q6J("value",t),e.xp6(2),e.Oqu(t.NIM),e.xp6(2),e.Oqu(t.NAMA_MAHASISWA),e.xp6(2),e.Oqu(t.PRODI),e.xp6(2),e.Oqu(t.FAKULTAS)}}function F(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",34)(1,"label",35)(2,"p"),e._uU(3,"Nama Mahasiswa"),e.qZA()(),e.TgZ(4,"input",36),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.selectEditing.NAMA_MAHASISWA=a)}),e.qZA()(),e.TgZ(5,"div",37)(6,"label",38)(7,"p"),e._uU(8,"NIM"),e.qZA()(),e.TgZ(9,"input",39),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.selectEditing.NIM=a)}),e.qZA()(),e.TgZ(10,"div",37)(11,"label",40)(12,"p"),e._uU(13,"Prodi"),e.qZA()(),e.TgZ(14,"p-dropdown",41),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.selectEditing.PRODI=a)}),e.qZA()(),e.TgZ(15,"div",37)(16,"label",42)(17,"p"),e._uU(18,"Fakultas"),e.qZA()(),e.TgZ(19,"p-dropdown",43),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.selectEditing.FAKULTAS=a)}),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.selectEditing.NAMA_MAHASISWA),e.xp6(5),e.Q6J("ngModel",t.selectEditing.NIM)("disabled",!0),e.xp6(5),e.Q6J("options",t.prodi)("ngModel",t.selectEditing.PRODI),e.xp6(5),e.Q6J("options",t.fakultas)("ngModel",t.selectEditing.FAKULTAS)}}function K(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.hideDialog(a.selectEditing))}),e.qZA(),e.TgZ(1,"button",45),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.savEdit(a.selectEditing))}),e.qZA()}}function J(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",46)(1,"label",35),e._uU(2,"Nama Mahasiswa"),e.qZA(),e.TgZ(3,"input",47),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.namaMahasiswa_new=a)}),e.qZA()(),e.TgZ(4,"div",46)(5,"label",38),e._uU(6,"NIM"),e.qZA(),e.TgZ(7,"input",48),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.nim_new=a)}),e.qZA()(),e.TgZ(8,"div",46)(9,"label",40),e._uU(10,"Prodi"),e.qZA(),e.TgZ(11,"p-dropdown",49),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.prodi_new=a)}),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.namaMahasiswa_new),e.xp6(4),e.Q6J("ngModel",t.nim_new),e.xp6(4),e.Q6J("options",t.prodi)("ngModel",t.prodi_new)}}function k(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.hideDialog())}),e.qZA(),e.TgZ(1,"button",45),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.saveNew())}),e.qZA()}}const H=()=>["NAMA_MAHASISWA","NIM","PRODI","FAKULTAS"],G=()=>({"min-width":"75rem"}),v=()=>({width:"450px"});let R=(()=>{class s{constructor(t,n,a){this.userService=t,this.messageService=n,this.confirmationService=a,this.editDialog=!1,this.addDialog=!1,this.loadingMahasiswa=!1,this.mahasiswa=[],this.prodi=[],this.fakultas=[],this.selectEditing={ID:null,NAMA_MAHASISWA:null,NIM:null,PRODI:null,FAKULTAS:null},this.selectedMahasiswa=[]}ngOnInit(){this.initial_API()}initial_API(){var t=this;return(0,T.Z)(function*(){t.mahasiswa_get(),t.get_prodi(),t.get_fakultas()})()}get_prodi(){this.userService.prodi_get("user123").then(n=>{this.prodi=n.data}).catch(n=>{console.log(n)})}get_fakultas(){this.userService.fakultas_get("user123").then(n=>{this.fakultas=n.data}).catch(n=>{console.log(n)})}mahasiswa_get(){this.loadingMahasiswa=!0,this.userService.mahasiswa_get("user123").then(n=>{this.mahasiswa=n.data,0===this.mahasiswa.length?(this.loadingMahasiswa=!1,this.messageService.clear(),this.messageService.add({severity:"error",summary:"Error",detail:"Data Not Found"})):this.loadingMahasiswa=!1}).catch(n=>{this.loadingMahasiswa=!1,this.messageService.clear(),this.messageService.add({severity:"error",summary:"Error",detail:"Data Not Found"})})}editMahasiswa(t){this.selectEditing={...t},this.editDialog=!0}hideDialog(t){this.editDialog=!1,this.addDialog=!1,this.namaMahasiswa_new=null,this.nim_new=null,this.prodi_new=null}savEdit(t){this.selectEditing=t;const n={ID:this.selectEditing.ID,NAMA_MAHASISWA:this.selectEditing.NAMA_MAHASISWA,NIM:this.selectEditing.NIM,PROGDI_ID:this.selectEditing.PRODI.ID,FAKULTAS_ID:this.selectEditing.FAKULTAS.ID,"X-API-KEY":"user123"};let a=!1;for(let i in n)if(void 0===n[i]){a=!0;break}a?(this.messageService.clear(),this.messageService.add({severity:"warn",summary:"Warning!",detail:"Lengkapi Data!"})):this.userService.editMahasiswa_post(n).then(i=>{this.editDialog=!1,this.mahasiswa_get(),this.messageService.clear(),this.messageService.add({severity:"success",summary:"Berhasil",detail:"Berhasil Mengubah Data"})}).catch(i=>{console.log(i),this.editDialog=!0,this.messageService.clear(),this.messageService.add({severity:"error",summary:"Error",detail:"Gagal Mengubah Data"})})}confirmDelete(t){this.objectDelete=t,this.confirmationService.confirm({message:"Are you sure you want to delete this?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{const n={NIM:this.objectDelete.NIM,"X-API-KEY":"user123"};n&&this.userService.delete_mahasiswa_post(n).then(a=>{this.mahasiswa_get(),this.messageService.clear(),this.messageService.add({severity:"info",summary:"Confirmed",detail:"Record deleted",life:3e3})}).catch(a=>{console.log(a),this.messageService.add({severity:"error",summary:"Gagal",detail:"Gagal Menghapus Data",life:3e3})})}})}tambahMahasiswa(){this.addDialog=!0}saveNew(){const t={NAMA_MAHASISWA:this.namaMahasiswa_new,NIM:this.nim_new,FAKULTAS_ID:this.prodi_new.FAKULTAS_ID,PROGDI_ID:this.prodi_new.ID,"X-API-KEY":"user123"};let n=!1;for(let a in t)if(void 0===t[a]){n=!0;break}n?(this.messageService.clear(),this.messageService.add({severity:"warn",summary:"Warning!",detail:"Lengkapi Data!"})):this.userService.mahasiswa_post(t).then(a=>{this.addDialog=!1,this.mahasiswa_get(),this.namaMahasiswa_new=null,this.nim_new=null,this.prodi_new={FAKULTAS_ID:null,ID:null},this.messageService.clear(),this.messageService.add({severity:"success",summary:"Berhasil",detail:"Berhasil Input Data"})}).catch(a=>{406===a.status?(this.messageService.clear(),this.messageService.add({severity:"warn",summary:"Warning",detail:"Data Sudah Ada!"})):(this.namaMahasiswa_new=null,this.nim_new=null,this.prodi_new={FAKULTAS_ID:null,ID:null},this.addDialog=!1,this.messageService.clear(),this.messageService.add({severity:"error",summary:"Error",detail:"Gagal Input Data"}))})}confirmDeleteBorongan(){const n={ID:this.selectedMahasiswa.map(a=>a.ID),"X-API-KEY":"user123"};this.confirmationService.confirm({message:"Are you sure you want to delete the selected record?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.userService.delete_selected_mahasiswa_post(n).then(a=>{console.log(a),this.mahasiswa_get(),this.messageService.clear(),this.messageService.add({severity:"success",summary:"Successful",detail:"Records Deleted",life:3e3})}).catch(a=>{console.log(a)})}})}static#e=this.\u0275fac=function(n){return new(n||s)(e.Y36(b),e.Y36(g.ez),e.Y36(g.YP))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-user-management"]],decls:18,vars:26,consts:[[1,"col-12"],[1,"card"],["styleClass","mb-4 gap-2"],["pTemplate","left"],["class","col-12",4,"ngIf"],["dataKey","ID","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","paginator","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Edit Mahasiswa",3,"modal","visible","draggable","resizable","closable","maximizable","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Tambah Mahasiswa","styleClass","p-fluid",3,"visible","modal","draggable","visibleChange"],["pRipple","","severity","success","label","New","icon","pi pi-plus",1,"mr-2",3,"click"],["pRipple","","severity","danger","label","Delete","icon","pi pi-trash",3,"disabled","click"],["mode","indeterminate"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],[2,"width","4rem"],["pSortableColumn","NIM",2,"width","20%"],["field","NIM"],["pSortableColumn","NAMA_MAHASISWA",2,"width","20%"],["field","NAMA_MAHASISWA"],["pSortableColumn","PRODI",2,"width","20%"],["field","PRODI"],["pSortableColumn","FAKULTAS",2,"width","20%"],["field","FAKULTAS"],[3,"value"],["pButton","","pRipple","","icon","pi pi-pencil",1,"mr-2","p-button-rounded","p-button-warn","p-button-outlined",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"ml-2","p-button-rounded","p-button-danger","p-button-outlined",3,"click"],[1,"p-fluid"],["for","namaMahasiswa"],["pInputText","","type","text","id","namaMahasiswa",3,"ngModel","ngModelChange"],[1,"p-fluid","mt-2"],["for","NIM"],["pInputText","","type","text","id","NIM",3,"ngModel","disabled","ngModelChange"],["for","Prodi"],["optionLabel","PROGRAM_STUDI","appendTo","body","placeholder","-- Pilih Prodi Baru ---",3,"options","ngModel","ngModelChange"],["for","Fakultas"],["optionLabel","FAKULTAS_NAME","appendTo","body","placeholder","-- Pilih Fakultas Baru ---",3,"options","ngModel","ngModelChange"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click"],[1,"field"],["type","text","pInputText","","id","namaMahasiswa",3,"ngModel","ngModelChange"],["type","text","pInputText","","id","NIM",3,"ngModel","ngModelChange"],["optionLabel","PROGRAM_STUDI","appendTo","body",3,"options","ngModel","ngModelChange"]],template:function(n,a){1&n&&(e._UZ(0,"p-toast")(1,"p-confirmDialog"),e.TgZ(2,"div",0)(3,"div",1)(4,"p-toolbar",2),e.YNc(5,U,2,1,"ng-template",3),e.qZA(),e.YNc(6,N,2,3,"div",4),e.TgZ(7,"p-table",5,6),e.NdJ("selectionChange",function(l){return a.selectedMahasiswa=l}),e.YNc(9,y,6,0,"ng-template",7)(10,E,16,0,"ng-template",8)(11,P,14,5,"ng-template",9),e.qZA()()(),e.TgZ(12,"p-dialog",10),e.NdJ("visibleChange",function(l){return a.editDialog=l}),e.YNc(13,F,20,7,"ng-template",11)(14,K,2,0,"ng-template",12),e.qZA(),e.TgZ(15,"p-dialog",13),e.NdJ("visibleChange",function(l){return a.addDialog=l}),e.YNc(16,J,12,4,"ng-template",11)(17,k,2,0,"ng-template",12),e.qZA()),2&n&&(e.xp6(6),e.Q6J("ngIf",a.loadingMahasiswa),e.xp6(1),e.Q6J("value",a.mahasiswa)("rows",10)("paginator",!0)("globalFilterFields",e.DdM(22,H))("tableStyle",e.DdM(23,G))("selection",a.selectedMahasiswa)("rowHover",!0)("showCurrentPageReport",!0),e.xp6(5),e.Akn(e.DdM(24,v)),e.Q6J("modal",!0)("visible",a.editDialog)("draggable",!1)("resizable",!1)("closable",!1)("maximizable",!0),e.xp6(3),e.Akn(e.DdM(25,v)),e.Q6J("visible",a.addDialog)("modal",!0)("draggable",!1))},dependencies:[u.O5,d.Fj,d.JJ,d.On,g.jx,m.Hq,m.zx,M.o,Z.Q,A.V,x.Lt,f.k,w.H,p.iA,p.lQ,p.fz,p.UA,p.Mo,S.FN,I.o]})}return s})(),q=(()=>{class s{static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275mod=e.oAB({type:s});static#a=this.\u0275inj=e.cJS({imports:[_.Bz.forChild([{path:"",component:R}]),_.Bz]})}return s})();var L=o(4844),O=o(1230);let B=(()=>{class s{static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275mod=e.oAB({type:s});static#a=this.\u0275inj=e.cJS({imports:[u.ez,q,m.hJ,w.T,d.u5,L.LU,M.j,O.Q,f.q,p.U$,A.S]})}return s})()}}]);